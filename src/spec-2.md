
# 規格（Spec v2）：職務類別索引與職缺類別索引

本文件定義：
- 職務類別（大／中／小）的資料規則
- 以 O(1) 為目標的索引結構（`Dictionary` / `HashSet`）與必備查詢能力
- 「職缺代碼 → 職務類別」的索引結構與必備查詢能力

> 目標：讓開發者能依此實作、讓測試能依此驗收。

---

## 1. 名詞定義

- **職務大類（Major）**：最上層分類。
- **職務中類（Middle）**：隸屬於某一個大類。
- **職務小類（Minor）**：隸屬於某一個中類。
- **代碼（Code）**：分類或職缺的識別碼。類別代碼與職缺代碼是不同概念。
- **父代碼（ParentCode）**：用於表示上層類別的代碼。

---

## 2. 職務類別規則（大／中／小）

### 2.1 層級約束

- 大類沒有父代碼。
- 中類一定要有父代碼，且父代碼必須對應到一個存在的「大類代碼」。
- 小類一定要有父代碼，且父代碼必須對應到一個存在的「中類代碼」。

### 2.2 範例資料（本次規格固定的樣例）

#### 大類
- 名稱：管理幕僚／人資／行政；代碼：`100000`

#### 中類
- 名稱：管理幕僚；代碼：`100100`；父代碼：`100000`
- 名稱：人力資源；代碼：`100200`；父代碼：`100000`

#### 小類
- 名稱：經營管理主管；代碼：`100101`；父代碼：`100100`
- 名稱：特別助理；代碼：`100105`；父代碼：`100100`
- 名稱：人事助理；代碼：`100205`；父代碼：`100200`
- 名稱：就業服務員；代碼：`100206`；父代碼：`100200`

---

## 3. 職缺欄位（資料模型需求）

每一筆職缺至少要包含：

- **職缺編號**：整數（常整數）
- **工作標題**：字串
- **工作說明**：字串
- **職務小類**：可多筆（0..N）
	- 每一筆小類以「小類代碼」表示
	- 同一職缺不可重複同一個小類代碼（需去重）

---

## 4. 物件設計需求：職務類別（大／中／小）索引

### 4.1 設計目標

- 建立以 `Dictionary` / `HashSet` 為主的索引資料結構。
- 對於「代碼 → 關聯代碼集合」的查詢，期望平均時間複雜度為 **O(1)**（Hash 查找）。
- 查詢支援「輸入一個或多個代碼」，輸出「多筆關聯類別」。

> 備註：多筆輸入時，總時間會隨輸入筆數與輸出筆數成長；本規格的 O(1) 指的是索引查找本身使用 Hash 結構，不做線性掃描全表。

### 4.2 必備查詢（可驗收）

系統必須提供以下查詢能力（輸入可以是一個代碼或多個代碼）：

1) **用一個或多個「職務小類」找到多個「職務大類」**
- Input: `minorCodes`（小類代碼集合）
- Output: `majorCodes`（大類代碼集合）

2) **用一個或多個「職務小類」找到多個「職務中類」**
- Input: `minorCodes`
- Output: `middleCodes`

3) **用一個或多個「職務中類」找到多個「職務小類」**
- Input: `middleCodes`
- Output: `minorCodes`

4) **用一個或多個「職務中類」找到多個「職務大類」**
- Input: `middleCodes`
- Output: `majorCodes`

5) **用一個或多個「職務大類」找到多個「職務小類」**
- Input: `majorCodes`
- Output: `minorCodes`

6) **用一個或多個「職務大類」找到多個「職務中類」**
- Input: `majorCodes`
- Output: `middleCodes`

### 4.3 回傳集合規則

- 若輸入包含重複代碼，視為同一代碼，結果不應重複。
- 若輸入包含不存在的代碼：
	- 該代碼對結果無貢獻（忽略），不應導致整體查詢失敗。
- 輸出以集合語意呈現（例如 `HashSet`）：不保證順序。

---

## 5. 物件設計需求：職缺代碼 → 職務類別索引

### 5.1 設計目標

- 建立以 `Dictionary` / `HashSet` 為主的索引資料結構。
- 支援以「一個或多個職缺代碼」查詢其對應的類別集合。

### 5.2 必備查詢（可驗收）

系統必須提供以下查詢能力：

1) **用一個或多個「職缺代碼」找到多筆「職務小類」**
- Input: `jobIds`（職缺代碼/職缺編號集合）
- Output: `minorCodes`

2) **用一個或多個「職缺代碼」找到多筆「職務中類」**
- Input: `jobIds`
- Output: `middleCodes`

3) **用一個或多個「職缺代碼」找到多個「職務大類」**
- Input: `jobIds`
- Output: `majorCodes`

### 5.3 映射規則（由層級索引推導）

- 職缺資料只直接儲存「職務小類代碼（可多筆）」。
- 查詢中類/大類時：
	- 必須透過「職務類別（大／中／小）索引」由小類推導出中類與大類。

---

## 6. 非目標（本規格不涵蓋）

- 不定義 UI / API 路由。
- 不定義資料儲存層（例如 MSSQL schema）。
- 不定義排序規則（回傳集合不保證順序）。

